<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=EB+Garamond:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
  body { font-family:'EB Garamond', serif; background:#f4f7f9; color:#333; }
  .pricing-section { max-width:1200px; margin:0 auto; text-align:center; padding:40px 20px; }
  .pricing-section h1 { font-size:2.8em; color:#005f73; margin-bottom:10px; }
  .pricing-section p { font-size:1.2em; color:#555; margin-bottom:50px; }
  .pricing-cards { display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:30px; }
  .card { background:#fff; border-radius:12px; padding:30px; box-shadow:0 8px 20px rgba(0,0,0,.08); transition:.3s; }
  .card:hover { transform:translateY(-5px); box-shadow:0 12px 25px rgba(0,0,0,.12); }
  .card h2 { font-size:1.8em; color:#005f73; margin-bottom:10px; }
  .price { font-size:1.6em; font-weight:600; color:#0a9396; margin-bottom:20px; }
  .btn { display:inline-block; padding:12px 24px; background:#0a9396; color:#fff; text-decoration:none; border-radius:8px; font-size:1.1em; cursor:pointer; }
  .btn:hover { background:#007f87; }

  /* Modal */
  .modal { display:none; position:fixed; inset:0; z-index:1000; background:rgba(0,0,0,0.6); justify-content:center; align-items:center; }
  .modal-content { background:#fff; padding:30px; max-width:500px; width:100%; border-radius:8px; position:relative; }
  .close { position:absolute; top:10px; right:15px; font-size:1.5em; cursor:pointer; color:#333; }
  .modal h2 { text-align:center; margin-bottom:20px; color:#005f73; }
  form label { display:block; margin:12px 0 4px; font-weight:600; text-align:left; }
  form input, form textarea { width:100%; padding:10px; border:1px solid #ccc; border-radius:6px; font-family:'EB Garamond', serif; font-size:1em; }
  form textarea { resize:vertical; }
  form button { margin-top:20px; padding:12px; background:#0a9396; color:#fff; border:none; border-radius:6px; font-size:1.1em; cursor:pointer; width:100%; }
  form button:hover { background:#007f87; }
  .thankyou { text-align:center; font-size:1.2em; color:#256029; padding:20px; }
</style>

<section class="pricing-section">
  <h1>Pricing</h1>
  <p>Accessible and flexible counselling options to support your wellbeing.</p>

  <div class="pricing-cards">
    <div class="card">
      <h2>Initial Consultation</h2>
      <p class="price">Free</p>
      <p>20 minutes · Video call or phone\n · Flexible scheduling</p>
      <button class="btn" onclick="openModal('Initial Consultation')">Book Now</button>
    </div>

    <div class="card">
      <h2>Assessment</h2>
      <p class="price">£80</p>
      <p>50 minutes · Video call or phone · Flexible scheduling</p>
      <button class="btn" onclick="openModal('Single Session')">Book Now</button>
    </div>

    <div class="card">
      <h2>Individual Session</h2>
      <p class="price">£65</p>
      <p>50 minutes · Video call or phone · Flexible scheduling</p>
      <button class="btn" onclick="openModal('5-Session Package')">Book Now</button>
    </div>

    <div class="card">
      <h2>Couple Session</h2>
      <p class="price">£95</p>
      <p>60 minutes · Video call or phone · Flexible scheduling</p>
      <button class="btn" onclick="openModal('Online Session')">Book Now</button>
    </div>
  </div>
</section>

<!-- Modal -->
<div id="bookingModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal()">&times;</span>
    <h2>Book a Session</h2>
    <div id="formContainer">
      <form id="bookingForm">
        <label>Your Name</label>
        <input type="text" name="name" required>

        <label>Your Email</label>
        <input type="email" name="_replyto" required>

        <label>Service</label>
        <input type="text" id="serviceField" name="service" readonly>

        <label>Message</label>
        <textarea name="message" rows="4" required></textarea>

        <button type="submit">Send Booking Request</button>
      </form>
    </div>
  </div>
</div>

<script>
  function openModal(service) {
    document.getElementById('serviceField').value = service;
    document.getElementById('bookingModal').style.display = 'flex';
  }
  function closeModal() {
    document.getElementById('bookingModal').style.display = 'none';
    // Reset form for next time
    document.getElementById('formContainer').innerHTML = document.getElementById('originalForm').innerHTML;
    attachFormHandler();
  }
  window.onclick = function(e) {
    const modal = document.getElementById('bookingModal');
    if (e.target === modal) closeModal();
  }

  // Store original form HTML for reset
  document.addEventListener("DOMContentLoaded", () => {
    const formHTML = document.getElementById('formContainer').innerHTML;
    const hiddenDiv = document.createElement("div");
    hiddenDiv.id = "originalForm";
    hiddenDiv.style.display = "none";
    hiddenDiv.innerHTML = formHTML;
    document.body.appendChild(hiddenDiv);
    attachFormHandler();
  });

  // Attach AJAX handler to Formspree
  function attachFormHandler() {
    const form = document.getElementById("bookingForm");
    if (!form) return;
    form.addEventListener("submit", async function(e) {
      e.preventDefault();
      const data = new FormData(form);
      const response = await fetch("https://formspree.io/f/xkgvllyw", {
        method: "POST",
        body: data,
        headers: { "Accept": "application/json" }
      });
      if (response.ok) {
        document.getElementById("formContainer").innerHTML = "<div class='thankyou'>✅ Thank you! Your booking request has been sent.</div>";
      } else {
        document.getElementById("formContainer").innerHTML = "<div class='thankyou' style='color:#a10000;'>❌ Sorry, something went wrong. Please email us directly at julie@halcyoncounselling.com.</div>";
      }
    });
  }
</script>


